<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1000px" height="600px" viewBox="-0.5 -0.5 1000 600" content="&lt;mxfile host=&quot;app.diagrams.net&quot;&gt;&lt;diagram name=&quot;Architecture&quot; id=&quot;arch&quot;&gt;&lt;mxGraphModel dx=&quot;1000&quot; dy=&quot;600&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;1000&quot; pageHeight=&quot;600&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>

  <!-- Background -->
  <rect fill="#ffffff" width="1000" height="600" x="0" y="0"/>

  <!-- Title -->
  <text x="500" y="35" fill="#232F3E" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle">AgentCore + Mastra Architecture (ap-northeast-1)</text>

  <!-- Frontend Group Box -->
  <rect x="30" y="180" width="240" height="280" fill="none" stroke="#82b366" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="40" y="200" fill="#82b366" font-family="Arial" font-size="12" font-weight="bold">Frontend</text>

  <!-- Auth Group Box -->
  <rect x="310" y="80" width="240" height="130" fill="none" stroke="#C7131F" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="320" y="100" fill="#C7131F" font-family="Arial" font-size="12" font-weight="bold">Authentication</text>

  <!-- Backend Group Box -->
  <rect x="310" y="220" width="280" height="130" fill="none" stroke="#D05C17" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="320" y="240" fill="#D05C17" font-family="Arial" font-size="12" font-weight="bold">Backend</text>

  <!-- AI Group Box -->
  <rect x="620" y="220" width="350" height="220" fill="none" stroke="#116D5B" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="630" y="240" fill="#116D5B" font-family="Arial" font-size="12" font-weight="bold">AI / Agent</text>

  <!-- User Icon -->
  <circle cx="80" cy="280" r="25" fill="#f5f5f5" stroke="#232F3E" stroke-width="2"/>
  <circle cx="80" cy="270" r="8" fill="#232F3E"/>
  <path d="M65 295 Q80 285 95 295" fill="none" stroke="#232F3E" stroke-width="3"/>
  <text x="80" y="320" fill="#232F3E" font-family="Arial" font-size="11" text-anchor="middle">User</text>

  <!-- CloudFront -->
  <rect x="160" y="255" width="60" height="50" fill="#5A30B5" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="190" y="280" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Cloud</text>
  <text x="190" y="292" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Front</text>
  <text x="190" y="320" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">CloudFront</text>

  <!-- S3 -->
  <rect x="160" y="370" width="60" height="50" fill="#277116" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="190" y="395" fill="#ffffff" font-family="Arial" font-size="10" text-anchor="middle" font-weight="bold">S3</text>
  <text x="190" y="435" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">React App</text>

  <!-- Cognito User Pool -->
  <rect x="340" y="115" width="70" height="50" fill="#C7131F" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="375" y="140" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Cognito</text>
  <text x="375" y="175" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">User Pool</text>

  <!-- Cognito Identity Pool -->
  <rect x="450" y="115" width="70" height="50" fill="#C7131F" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="485" y="140" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Cognito</text>
  <text x="485" y="175" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">Identity Pool</text>

  <!-- API Gateway -->
  <rect x="340" y="265" width="70" height="50" fill="#5A30B5" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="375" y="285" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">API</text>
  <text x="375" y="297" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Gateway</text>
  <text x="375" y="330" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">REST API</text>

  <!-- Lambda -->
  <rect x="480" y="265" width="70" height="50" fill="#D05C17" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="515" y="290" fill="#ffffff" font-family="Arial" font-size="10" text-anchor="middle" font-weight="bold">Lambda</text>
  <text x="515" y="330" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">Hono</text>

  <!-- Bedrock AgentCore -->
  <rect x="660" y="265" width="80" height="50" fill="#116D5B" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="700" y="285" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">AgentCore</text>
  <text x="700" y="297" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Runtime</text>
  <text x="700" y="330" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">Bedrock</text>

  <!-- Mastra -->
  <rect x="660" y="370" width="80" height="45" fill="#dae8fc" stroke="#6c8ebf" stroke-width="2" rx="5"/>
  <text x="700" y="390" fill="#333333" font-family="Arial" font-size="10" text-anchor="middle" font-weight="bold">Mastra</text>
  <text x="700" y="405" fill="#666666" font-family="Arial" font-size="9" text-anchor="middle">TypeScript Agent</text>

  <!-- Amazon Bedrock -->
  <rect x="820" y="265" width="80" height="50" fill="#116D5B" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="860" y="285" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Amazon</text>
  <text x="860" y="297" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">Bedrock</text>
  <text x="860" y="330" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">Claude</text>

  <!-- CodeBuild -->
  <rect x="50" y="370" width="60" height="50" fill="#3334B9" stroke="#ffffff" stroke-width="1" rx="5"/>
  <text x="80" y="395" fill="#ffffff" font-family="Arial" font-size="9" text-anchor="middle" font-weight="bold">CodeBuild</text>
  <text x="80" y="435" fill="#232F3E" font-family="Arial" font-size="10" text-anchor="middle">Web Build</text>

  <!-- Arrows -->
  <!-- User to CloudFront -->
  <path d="M105 280 L155 280" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- CloudFront to S3 -->
  <path d="M190 305 L190 365" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- CloudFront to API Gateway -->
  <path d="M220 280 L335 280" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="270" y="270" fill="#333333" font-family="Arial" font-size="9">+ ID Token</text>

  <!-- API Gateway to Cognito -->
  <path d="M375 265 L375 170" fill="none" stroke="#C7131F" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead-red)"/>
  <text x="330" y="220" fill="#C7131F" font-family="Arial" font-size="9">Authorize</text>

  <!-- Cognito to Identity Pool -->
  <path d="M415 140 L445 140" fill="none" stroke="#C7131F" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead-red)"/>

  <!-- API Gateway to Lambda -->
  <path d="M415 290 L475 290" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Lambda to AgentCore -->
  <path d="M555 290 L655 290" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="580" y="280" fill="#333333" font-family="Arial" font-size="8">InvokeAgentRuntime</text>

  <!-- AgentCore to Mastra -->
  <path d="M700 315 L700 365" fill="none" stroke="#6c8ebf" stroke-width="2" marker-end="url(#arrowhead-blue)"/>

  <!-- AgentCore to Bedrock -->
  <path d="M745 290 L815 290" fill="none" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="765" y="280" fill="#333333" font-family="Arial" font-size="8">InvokeModel</text>

  <!-- CodeBuild to S3 -->
  <path d="M115 395 L155 395" fill="none" stroke="#3334B9" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead-blue)"/>
  <text x="130" y="385" fill="#3334B9" font-family="Arial" font-size="9">Deploy</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#C7131F"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3334B9"/>
    </marker>
  </defs>

  <!-- Legend -->
  <rect x="820" y="480" width="150" height="100" fill="#f9f9f9" stroke="#cccccc" stroke-width="1" rx="5"/>
  <text x="830" y="500" fill="#333333" font-family="Arial" font-size="11" font-weight="bold">Legend</text>
  <line x1="830" y1="515" x2="860" y2="515" stroke="#333333" stroke-width="2"/>
  <text x="870" y="520" fill="#333333" font-family="Arial" font-size="10">Data Flow</text>
  <line x1="830" y1="535" x2="860" y2="535" stroke="#C7131F" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="870" y="540" fill="#C7131F" font-family="Arial" font-size="10">Auth Flow</text>
  <line x1="830" y1="555" x2="860" y2="555" stroke="#3334B9" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="870" y="560" fill="#3334B9" font-family="Arial" font-size="10">Deploy</text>

</svg>
